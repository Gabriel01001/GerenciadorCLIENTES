<div id="clients-screen" class="hidden">
    <div class="header">
        <div style="display:flex; gap:10px; align-items:center;">
            <button class="secondary btn-auto" onclick="voltarDashboard()">â¬… Voltar</button>
            <h3 style="margin:0;">GestÃ£o Clientes</h3>
        </div>
        <div style="display:flex; gap:5px; flex-wrap: wrap; justify-content: flex-end;">
            <button id="btn-undo-import" class="undo-btn btn-auto" onclick="desfazerImportacao()" style="display:none;">â†º Desfazer</button>
            <button class="import-btn btn-auto" onclick="document.getElementById('file-import-clients').click()">ğŸ“¤ Importar</button>
            <input type="file" id="file-import-clients" accept=".csv, .xlsx, .xls, .xml, .ods" hidden onchange="lerArquivoImportacao(this)">
            <button class="export-btn btn-auto" onclick="exportarPlanilhaClientes()">ğŸ“¥ Exportar</button>
            <button class="secondary btn-auto" onclick="abrirConfigMsg()">âš™ï¸ CobranÃ§a</button>
            
            <button class="btn-auto" style="background: #8b5cf6; color: white;" onclick="abrirConfigMsgAcesso()">âš™ï¸ Acesso</button>
            
            <button class="chat-btn btn-auto" onclick="abrirModalCliente()">â• Novo</button>
        </div>
    </div>
    ...
</div>

<script>
function renderizarLinhas(lista) {
    const corpo = document.getElementById('tabela-corpo');
    const msgEmpty = document.getElementById('msg-sem-clientes');
    corpo.innerHTML = '';
    if(lista.length === 0) { msgEmpty.style.display = 'block'; return; } else { msgEmpty.style.display = 'none'; }
    const isAdmin = (currentUserData.cargo === 'Admin' || currentUserData.cargo === 'Sub-Admin');
    const thCriador = document.getElementById('th-criador');
    if(thCriador) thCriador.style.display = isAdmin ? 'table-cell' : 'none';
    const hoje = new Date(); hoje.setHours(0,0,0,0);
    
    lista.forEach(cli => {
        let waLink = '-'; if(cli.whatsapp) { waLink = `<button onclick="prepararCobranca('${cli.id}')" class="wa-link">ğŸ“± Cobrar</button>`; }
        let alerta = ""; let corVenc = "#333";
        if (cli.vencimento && cli.vencimento.includes('/')) {
            const parts = cli.vencimento.split('/'); const dataVenc = new Date(parts[2], parts[1]-1, parts[0]); const diffDias = (dataVenc - hoje) / (1000 * 60 * 60 * 24);
            if (diffDias < 0) { alerta = "<span class='alert-icon'>âš </span>"; corVenc = "red"; } else if (diffDias <= 3) { alerta = "<span class='alert-icon'>âš </span>"; corVenc = "#d97706"; }
        }
        let criadorCell = isAdmin ? `<td data-label="Criador" style="color:var(--blue); font-weight:bold;">${cli.criador}</td>` : '';
        
        corpo.innerHTML += `<tr>
            <td data-label="Nome"><b>${cli.nome}</b></td>
            ${criadorCell}
            <td data-label="UsuÃ¡rio">${cli.usuario}</td>
            <td data-label="Servidor">${cli.servidor}</td>
            <td data-label="WhatsApp">${waLink}</td>
            <td data-label="Vencimento" style="color:${corVenc}; font-weight:bold;">${cli.vencimento || '-'} ${alerta}</td>
            <td data-label="Valor" style="color:var(--primary); font-weight:bold;">R$ ${cli.valor}</td>
            <td data-label="AÃ§Ãµes">
                <div style="display:flex; gap:5px; justify-content:center;">
                    <button class="btn-auto" style="background:#3b82f6; color:white; padding:6px 10px;" title="Enviar Acesso" onclick="enviarAcessoRapido('${cli.id}')">âœˆï¸</button>
                    
                    <button class="edit-btn btn-auto" style="padding:6px 10px;" onclick="prepararEdicaoCliente('${cli.id}')">âœï¸</button>
                    <button class="danger btn-auto" style="padding:6px 10px;" onclick="deletarCliente('${cli.id}')">ğŸ—‘ï¸</button>
                </div>
            </td>
        </tr>`;
    });
}

// ADICIONE ESTAS DUAS FUNÃ‡Ã•ES NO FINAL DO SEU SCRIPT
function abrirConfigMsgAcesso() {
    document.getElementById('config-acesso-input').value = localStorage.getItem('template_acesso_wa') || "";
    document.getElementById('modal-config-acesso').classList.add('show');
}

function salvarTemplateAcesso() {
    const tmpl = document.getElementById('config-acesso-input').value;
    localStorage.setItem('template_acesso_wa', tmpl);
    alert("Template salvo!");
    fecharModal('modal-config-acesso');
}

function enviarAcessoRapido(id) {
    const cli = listaClientes.find(c => String(c.id) === String(id));
    if(!cli || !cli.whatsapp) return alert("Cliente sem WhatsApp.");
    let template = localStorage.getItem('template_acesso_wa') || "OlÃ¡ {nome}, seu acesso: {usuario}";
    let msg = template.replace(/{nome}/g, cli.nome).replace(/{usuario}/g, cli.usuario).replace(/{servidor}/g, cli.servidor).replace(/{vencimento}/g, cli.vencimento);
    window.open(`https://wa.me/55${cli.whatsapp.replace(/\D/g,'')}?text=${encodeURIComponent(msg)}`);
}
</script>

<div id="modal-config-acesso" class="modal-overlay" style="z-index: 2000;"> 
    <div class="modal-content" style="max-width: 400px;"> 
        <span style="position:absolute; top:15px; right:15px; cursor:pointer; font-size:30px;" onclick="fecharModal('modal-config-acesso')">&times;</span> 
        <h3 style="color:#8b5cf6;">Configurar Msg Acesso</h3> 
        <textarea id="config-acesso-input" class="msg-box" style="height:120px;"></textarea> 
        <button onclick="salvarTemplateAcesso()" style="background:#8b5cf6;">ğŸ’¾ Salvar</button> 
    </div> 
</div>
